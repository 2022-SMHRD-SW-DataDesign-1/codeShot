<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.codeshot.mapper.ReviewMapper">
	
	<!-- 2022-11-07/김지수/게시물 별점 출력 -->
	<select id="starratingList" resultType="ReviewDTO">
		select A.post_num, avg(review_starrating) as review_starrating
		from tbl_review A, tbl_post B
		where A.post_num = B.post_num
		group by A.post_num
	</select>
	
	<!-- 2022-11-09/이슬비/리뷰데이터삽입 -->
	<insert id="insertReview" parameterType="ReviewDTO">
		insert into tbl_review(
			review_num,
			review_content,
			review_starrating,
			post_num,
			mem_email,
			review_date
		)values(
			#{review_num},
			#{review_content},
			#{review_starrating,},
			#{post_num},
			#{mem_email},
			sysdate
		)
	</insert>
	
	<!-- 2022-11-09/이슬비/리뷰전체목록 불러오기 -->
	<select id="reviewList" parameterType="ReviewDTO">
		select * from tbl_review where (mem_email=#{mem_email})
	</select>
	
	<!-- 2022-11-09/이슬비/리뷰전체목록 불러오기 -->
<!-- 	<select id="ReviewList">
		select * 
		from tbl_review
		where ()
	</select> -->
	
</mapper>